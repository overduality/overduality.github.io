<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ByeFraud - Real-Time Phishing Detection System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=IBM+Plex+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --text: #1a1a1a;
      --text-light: #666;
      --border: #e0e0e0;
      --bg-light: #fafafa;
      --accent: #dc2626;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'IBM Plex Sans', sans-serif;
      color: var(--text);
      background: #ffffff;
      line-height: 1.75;
      font-size: 17px;
    }

    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 260px;
      background: var(--bg-light);
      border-right: 1px solid var(--border);
      padding: 48px 24px 200px 24px;
      overflow-y: auto;
      z-index: 100;
    }

    .sidebar-title {
      font-family: 'Libre Baskerville', serif;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 24px;
      color: var(--text);
      line-height: 1.3;
    }
    
    .back-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: var(--bg-light);
      border: 1px solid var(--border);
      border-radius: 6px;
      text-decoration: none;
      color: var(--text);
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 24px;
      transition: all 0.2s ease;
    }

    .back-button:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    .github-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: #24292e;
      border: 1px solid #24292e;
      border-radius: 6px;
      text-decoration: none;
      color: white;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 24px;
      transition: all 0.2s ease;
    }

    .github-link:hover {
      background: #1a1f24;
      border-color: #1a1f24;
    }

    .sidebar-nav {
      list-style: none;
      padding-left: 0;
    }

    .sidebar-nav {
      list-style: none;
    }

    .sidebar-nav li {
      margin-bottom: 4px;
    }

    .sidebar-nav a {
      display: block;
      padding: 10px 16px;
      color: var(--text-light);
      text-decoration: none;
      font-size: 15px;
      border-radius: 6px;
      transition: all 0.2s ease;
      font-weight: 500;
    }

    .sidebar-nav a:hover {
      background: rgba(220, 38, 38, 0.08);
      color: var(--accent);
    }

    .sidebar-nav a.active {
      background: rgba(220, 38, 38, 0.12);
      color: var(--accent);
      font-weight: 600;
    }

    .sidebar-logo-container {
      position: absolute;
      bottom: 0px;
      left: 0;
      right: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 24px 0;
      animation: slideUpLogo 0.6s ease-out 0.3s forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    .sidebar-logo-container.visible {
      opacity: 1;
      transform: translateY(0);
    }

    @keyframes slideUpLogo {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .logo-wrapper {
      width: auto;
      height: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .logo-wrapper::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: transparent;
      transform: scale(0);
      transition: transform 0.5s ease;
    }

    .logo-wrapper:hover {
      transform: scale(1.05);
    }

    .logo-wrapper:hover::before {
      transform: scale(1);
    }

    .sidebar-logo {
      width: 150px;
      height: 150px;
      object-fit: contain;
      transition: all 0.3s ease;
    }

    .logo-wrapper:hover .sidebar-logo {
      transform: scale(1.05);
    }

    .logo-label {
      font-size: 16px;
      font-weight: 700;
      color: var(--accent);
      letter-spacing: 0.05em;
      text-transform: uppercase;
      font-family: 'JetBrains Mono', monospace;
      opacity: 0;
      transform: translateY(10px);
      animation: slideUpLogoText 0.4s ease-out 0.5s forwards;
    }

    @keyframes slideUpLogoText {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes logoPulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.02);
      }
    }

    .sidebar-logo-container:hover .logo-wrapper {
      /* Removed pulse animation */
    }

    .main {
      margin-left: 260px;
      padding: 80px 100px 120px 100px;
      max-width: 1100px;
    }

    h1 {
      font-family: 'Libre Baskerville', serif;
      font-size: 48px;
      line-height: 1.2;
      font-weight: 700;
      margin-bottom: 20px;
      letter-spacing: -0.02em;
    }

    h2 {
      font-family: 'Libre Baskerville', serif;
      font-size: 36px;
      font-weight: 700;
      margin: 80px 0 28px 0;
      letter-spacing: -0.01em;
      scroll-margin-top: 40px;
    }

    h3 {
      font-size: 24px;
      font-weight: 600;
      margin: 48px 0 20px 0;
      color: var(--text);
    }

    .lead {
      font-size: 21px;
      color: var(--text-light);
      margin-bottom: 48px;
      line-height: 1.6;
    }

    p {
      margin-bottom: 20px;
    }

    strong {
      font-weight: 600;
      color: var(--text);
    }

    section {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .result-box {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border: 1px solid var(--border);
      border-left: 4px solid var(--accent);
      padding: 32px;
      margin: 40px 0;
      border-radius: 8px;
    }

    .result-box h3 {
      margin-top: 0;
      margin-bottom: 16px;
      font-size: 22px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 48px 0;
    }

    .stat-card {
      background: var(--bg-light);
      border: 1px solid var(--border);
      padding: 28px 24px;
      text-align: center;
      border-radius: 8px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.06);
    }

    .stat-value {
      display: block;
      font-size: 36px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    .stat-label {
      font-size: 14px;
      color: var(--text-light);
      font-weight: 500;
    }

    ul, ol {
      margin: 24px 0;
      padding-left: 28px;
    }

    li {
      margin-bottom: 12px;
      color: var(--text);
    }

    li::marker {
      color: var(--accent);
    }

    code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      background: #f5f5f5;
      padding: 3px 8px;
      border-radius: 4px;
      border: 1px solid var(--border);
    }

    pre {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      background: #f5f5f5;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
      margin: 32px 0;
      overflow-x: auto;
      line-height: 1.6;
    }

    pre code {
      background: none;
      padding: 0;
      border: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 40px 0;
      font-size: 15px;
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      text-align: left;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }

    th {
      font-weight: 600;
      background: var(--bg-light);
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text);
    }

    tbody tr:hover {
      background: var(--bg-light);
    }

    .highlight {
      background: #fef2f2;
      font-weight: 600;
    }

    .callout {
      background: #fefce8;
      border-left: 4px solid #facc15;
      padding: 24px 28px;
      margin: 40px 0;
      border-radius: 8px;
    }

    .callout-title {
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 18px;
      color: var(--text);
    }

    .tech-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 32px 0;
    }

    .tech-tag {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      padding: 8px 16px;
      background: var(--bg-light);
      border: 1px solid var(--border);
      border-radius: 6px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .tech-tag:hover {
      background: rgba(220, 38, 38, 0.08);
      border-color: var(--accent);
      color: var(--accent);
    }

    .tech-stack-images {
      margin-top: 40px;
      padding-top: 32px;
      border-top: 1px solid var(--border);
    }

    .tech-stack-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 20px;
      text-align: center;
    }

    .tech-images-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .tech-image-card {
      background: white;
      border-radius: 12px;
      padding: 0px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      aspect-ratio: 1 / 1;
    }

    .tech-image-card:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 16px rgba(220, 38, 38, 0.15);
      transform: translateY(-4px);
    }

    .tech-image-card img {
      max-width: 80%;
      max-height: 80%;
      object-fit: contain;
      filter: grayscale(100%);
      opacity: 0.7;
      transition: all 0.3s ease;
    }

    .tech-image-card:hover img {
      filter: grayscale(0%);
      opacity: 1;
      transform: scale(1.1);
    }

    .divider {
      height: 1px;
      background: var(--border);
      margin: 80px 0;
    }

    .viz-container {
      background: var(--transparent);
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      margin: 40px 0;
      position: relative;
      overflow: hidden;
    }

    .viz-image {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: transform 0.3s ease;
    }

    .viz-image:hover {
      transform: scale(1.02);
    }

    @media (max-width: 1024px) {
      .sidebar {
        display: none;
      }

      .main {
        margin-left: 0;
        padding: 48px 32px 80px 32px;
      }

      h1 {
        font-size: 36px;
      }

      h2 {
        font-size: 28px;
        margin: 60px 0 24px 0;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .viz-container {
        padding: 15px;
      }

      .tech-images-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>

  <aside class="sidebar">
    <a href="/" class="back-button">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0L6.59 1.41L12.17 7H0v2h12.17l-5.58 5.59L8 16l8-8z" transform="rotate(180 8 8)"/>
      </svg>
      Back to Projects
    </a>
    <div class="sidebar-title">ByeFraud: Phishing Detection</div>
    <a href="https://github.com/overduality/byeFraud-ML" target="_blank" rel="noopener noreferrer" class="github-link">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
      </svg>
      View on GitHub
    </a>
    <nav>
      <ul class="sidebar-nav">
        <li><a href="#overview" class="active">Overview</a></li>
        <li><a href="#problem">Problem</a></li>
        <li><a href="#feature-engineering">Feature Engineering</a></li>
        <li><a href="#advanced-features">Advanced Features</a></li>
        <li><a href="#modeling">Model Development</a></li>
        <li><a href="#insights">Model Insights</a></li>
        <li><a href="#results">Results</a></li>
        <li><a href="#deployment">Deployment</a></li>
      </ul>
    </nav>

    <div class="sidebar-logo-container">
      <div class="logo-wrapper">
        <img src="./logos/logo lightmode.png" alt="ByeFraud Logo" class="sidebar-logo">
      </div>
    </div>
  </aside>

  <main class="main">

    <section id="overview" class="visible">
      <h1>ByeFraud: Real-Time Phishing Detection</h1>
      <p class="lead">
        This project explores phishing URL detection at scale using a LightGBM classifier with lexical, character-level TF-IDF, and domain impersonation features, with particular attention to evaluation design and data leakage risks common in security datasets.
      </p>

      <div class="stats-grid">
        <div class="stat-card">
          <span class="stat-value">99.60%</span>
          <span class="stat-label">Precision</span>
        </div>
        <div class="stat-card">
          <span class="stat-value">98.85%</span>
          <span class="stat-label">Recall</span>
        </div>
        <div class="stat-card">
          <span class="stat-value">1.2M</span>
          <span class="stat-label">URLs Trained</span>
        </div>
      </div>

      <div class="result-box">
        <h3>What This System Delivers</h3>
        <p>
          An enterprise-ready phishing detection API combining 20 handcrafted lexical features, 1,500 TF-IDF features (1,000 char n-grams + 500 word n-grams), and 4 novel domain impersonation indicators. Achieves 99.60% precision and 98.85% recall on phishing URLs while maintaining &lt;50ms inference latency—enabling real-time browser protection against zero-day attacks.
        </p>
      </div>

      <p><strong>The Problem:</strong> Phishing attacks cost $12.5B annually (FBI IC3 2023 Report). Traditional blacklists fail against zero-day sites, requiring ML-based detection that can identify novel phishing patterns.</p>

      <p><strong>The Solution:</strong> ML classifier trained on URL structure patterns rather than reputation databases, detecting novel phishing sites while maintaining low false positive rate (0.06%).</p>

      <div class="tech-tags">
        <span class="tech-tag">Python</span>
        <span class="tech-tag">LightGBM</span>
        <span class="tech-tag">Scikit-learn</span>
        <span class="tech-tag">TF-IDF</span>
        <span class="tech-tag">SMOTE</span>
        <span class="tech-tag">Feature Engineering</span>
      </div>

      <div class="tech-stack-images">
        <div class="tech-images-grid">
          <div class="tech-image-card">
            <img src="https://www.python.org/static/community_logos/python-logo-generic.svg" alt="Python Logo">
          </div>
          <div class="tech-image-card">
            <img src="https://upload.wikimedia.org/wikipedia/commons/d/d9/LightGBM_logo_black_text.svg" alt="LightGBM Logo">
          </div>
          <div class="tech-image-card">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Scikit_learn_logo_small.svg" alt="Scikit-learn Logo">
          </div>
          <div class="tech-image-card">
            <img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI Logo">
          </div>
        </div>
      </div>
    </section>

    <div class="divider"></div>

    <section id="problem">
      <h2>Problem Statement</h2>
      
      <h3>The Phishing Threat Landscape</h3>
      <ul>
        <li><strong>Volume:</strong> 4.74M phishing attacks in 2022 (APWG Quarterly Reports)</li>
        <li><strong>Zero-Day Gap:</strong> Blacklists lag 24-48hrs behind new sites—attackers exploit this window</li>
        <li><strong>Sophistication:</strong> Domain impersonation (paypa1.com, apple-support.phishing.com)</li>
        <li><strong>Legitimate Platforms Abused:</strong> Google Docs, Weebly, GitHub Pages host phishing content</li>
      </ul>

      <h3>Technical Challenges</h3>
      <ol>
        <li><strong>Class Imbalance:</strong> 12.5% phishing vs 87.5% legitimate (1:7 ratio)—models overfit to majority</li>
        <li><strong>Adversarial Evasion:</strong> Attackers deliberately mimic legitimate URL patterns</li>
        <li><strong>Latency Requirements:</strong> Browser extensions need &lt;100ms for seamless UX</li>
        <li><strong>Interpretability:</strong> Security teams require explainable features for incident response</li>
      </ol>

      <div class="callout">
        <div class="callout-title">Real-World Impact</div>
        <p>A single successful campaign (e.g., fake Microsoft 365 login) can harvest 10,000+ credentials before manual blacklist updates. Automated ML detection catches these at domain registration stage—before any user interaction.</p>
      </div>
    </section>

    <div class="divider"></div>

    <section id="feature-engineering">
      <h2>Core Feature Engineering</h2>

      <h3>Fast Lexical Features (20 baseline)</h3>
      <p>Computed in &lt;1ms without external API calls. The system extracts 20 structural features from raw URLs:</p>

      <pre><code>def extract_features(df):
    # URL structure (6 features)
    df['url_length'] = df['url'].apply(len)
    df['hostname_length'] = df['hostname'].apply(len)
    df['dot_count'] = df['url'].str.count(r'\.')
    df['hyphen_count'] = df['url'].str.count('-')
    df['at_symbol_count'] = df['url'].str.count('@')
    df['path_depth'] = df['url'].str.count('/')
    
    # Character analysis (5 features)
    df['digit_count'] = df['url'].str.count(r'[0-9]')
    df['digit_ratio'] = df['digit_count'] / df['url_length']
    df['special_char_count'] = sum(not c.isalnum() for c in url)
    df['special_char_ratio'] = special_count / url_length
    df['uppercase_ratio'] = uppercase_count / url_length
    
    # Security indicators (4 features)
    df['has_ip_address'] = hostname.match(r'^\d{1,3}\.\d{1,3}...')
    df['subdomain_count'] = len(hostname.split('.')) - 2
    df['has_port'] = ':' in hostname
    df['has_shortener'] = hostname.match(r'(bit\.ly|tinyurl|t\.co)')
    
    # Entropy (2 features)
    df['hostname_entropy'] = entropy(list(hostname))
    df['path_entropy'] = entropy(list(path))
    
    # Additional anomaly detection (1 feature)
    df['consecutive_dots'] = df['url'].str.count(r'\.{2,}')
    
    return df</code></pre>

      <h3>Complete Feature List</h3>
      <p><strong>Basic Lexical (16):</strong> url_length, hostname_length, dot_count, hyphen_count, at_symbol_count, path_depth, digit_ratio, has_ip_address, subdomain_count, has_port, special_char_ratio, uppercase_ratio, hostname_entropy, path_entropy, has_shortener, consecutive_dots</p>
      
      <p><strong>Advanced Phishing (4):</strong> has_impersonation_domain, subdomain_suspicion_score, domain_contains_hyphen, subdomain_depth</p>

      <h3>TF-IDF Vectorization (1,500 features)</h3>

      <pre><code># Character n-grams (3-5 chars) → 1,000 features
tfidf_char = TfidfVectorizer(
    analyzer='char',
    ngram_range=(3, 5),
    max_features=1000,
    min_df=5,
    max_df=0.6
)

# Word n-grams (1-2 words) → 500 features
tfidf_word = TfidfVectorizer(
    analyzer='word',
    ngram_range=(1, 2),
    max_features=500
)

# Captures patterns like:
# Char: "ps:", "ttp", "log", "sec", "upd"
# Word: "login verify", "account suspended"</code></pre>

      <p><strong>Why TF-IDF?</strong> TF-IDF assigns high discriminative weight to phishing-specific vocabularies, capturing character and word-level patterns that distinguish phishing from legitimate URLs.</p>

      <div class="viz-container">
        <img src="./images/dist.png" alt="Feature Distribution Analysis" class="viz-image">
      </div>
    </section>

    <div class="divider"></div>

    <section id="advanced-features">
      <h2>Advanced Phishing Features</h2>

      <h3>1. Domain Impersonation Detection</h3>
      <pre><code>def detect_impersonation_domain(url):
    """Catches: paypal.com.phishing.net"""
    ext = tldextract.extract(url)
    subdomain = ext.subdomain
    
    # Check if subdomain contains TLD patterns
    for tld in ['com', 'net', 'org', 'co.uk']:
        if f'.{tld}' in subdomain:
            return 1  # IMPERSONATION DETECTED
    return 0</code></pre>

      <h3>2. Subdomain Suspicion Score (0-9)</h3>
      <pre><code>def calculate_subdomain_suspicion_score(url):
    score = 0
    subdomain = tldextract.extract(url).subdomain
    
    # Phishing keywords
    keywords = ['login', 'secure', 'verify', 'update',
                'banking', 'payment', 'suspended']
    score += sum(1 for kw in keywords if kw in subdomain)
    
    # Structural anomalies
    if subdomain.count('-') > 1: score += 1
    if len(subdomain) > 20: score += 1
    if re.search(r'\d{3,}', subdomain): score += 1
    
    return score</code></pre>

      <p><strong>Example:</strong> <code>secure-login-verify.example.com</code> scores 3 (high suspicion)</p>

      <h3>3. Domain Contains Hyphen</h3>
      <p>Legitimate brands rarely use hyphens:</p>
      <ul>
        <li><code>apple-support.com</code> (phishing) vs <code>apple.com</code> (real)</li>
        <li><code>pay-pal.com</code> (phishing) vs <code>paypal.com</code> (real)</li>
      </ul>

      <h3>4. Subdomain Depth</h3>
      <p>Depth &gt; 2 is highly suspicious:</p>
      <ul>
        <li><code>www.google.com</code> → Depth 1 (legitimate)</li>
        <li><code>login.secure.verify.phishing.com</code> → Depth 4 (phishing)</li>
      </ul>

      <div class="viz-container">
        <img src="./images/conf_lex.png" alt="Feature Correlation Heatmap" class="viz-image">
      </div>
    </section>

    <div class="divider"></div>

    <section id="modeling">
      <h2>Model Development</h2>

      <h3>SMOTE: Addressing Class Imbalance</h3>
      <pre><code>from imblearn.over_sampling import SMOTE

smote = SMOTE(random_state=42, k_neighbors=5)
X_balanced, y_balanced = smote.fit_resample(X_train, y_train)

# Before: 1,076,582 legit, 153,512 phishing (7:1)
# After:  1,076,582 legit, 1,076,582 phishing (1:1)</code></pre>

      <h3>LightGBM Hyperparameters</h3>
      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Value</th>
            <th>Rationale</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>n_estimators</td>
            <td>300</td>
            <td>Sufficient boosting rounds for 2.1M samples</td>
          </tr>
          <tr>
            <td>max_depth</td>
            <td>15</td>
            <td>Deep trees capture feature interactions</td>
          </tr>
          <tr>
            <td>learning_rate</td>
            <td>0.01</td>
            <td>Slow learning prevents overfitting</td>
          </tr>
          <tr>
            <td>num_leaves</td>
            <td>100</td>
            <td>High leaf count for nuanced boundaries</td>
          </tr>
          <tr>
            <td>min_child_samples</td>
            <td>50</td>
            <td>Minimum samples per leaf for generalization</td>
          </tr>
          <tr>
            <td>subsample</td>
            <td>1.0</td>
            <td>Use full dataset per iteration</td>
          </tr>
          <tr>
            <td>colsample_bytree</td>
            <td>1.0</td>
            <td>Use all features per tree</td>
          </tr>
        </tbody>
      </table>

      <h3>Calibration & Threshold Optimization</h3>
      <pre><code># Isotonic calibration for confidence scores
calibrated_model = CalibratedClassifierCV(
    best_lgb, method='isotonic', cv=5
)

# Optimize threshold for F1 score
optimal_threshold = 0.686  # Maximizes F1</code></pre>
    </section>

    <div class="divider"></div>

    <section id="insights">
      <h2>Model Insights</h2>

      <h3>Feature Importance Analysis</h3>
      <table>
        <thead>
          <tr>
            <th>Feature</th>
            <th>Importance</th>
            <th>Type</th>
          </tr>
        </thead>
        <tbody>
          <tr class="highlight">
            <td>url_length</td>
            <td>1,796</td>
            <td>Lexical</td>
          </tr>
          <tr class="highlight">
            <td>subdomain_depth</td>
            <td>1,276</td>
            <td>Advanced</td>
          </tr>
          <tr>
            <td>digit_ratio</td>
            <td>1,191</td>
            <td>Lexical</td>
          </tr>
          <tr>
            <td>special_char_ratio</td>
            <td>1,138</td>
            <td>Lexical</td>
          </tr>
          <tr>
            <td>hostname_entropy</td>
            <td>1,008</td>
            <td>Lexical</td>
          </tr>
          <tr>
            <td>subdomain_suspicion_score</td>
            <td>278</td>
            <td>Advanced</td>
          </tr>
        </tbody>
      </table>

      <!-- <div class="viz-container">
        <img src="https://picsum.photos/900/550?random=3" alt="Feature Importance Bar Chart" class="viz-image">
      </div> -->

      <h3>Cross-Validation Stability</h3>
      <p>5-fold stratified cross-validation demonstrates consistent performance across data splits:</p>
      <ul>
        <li><strong>CV F1 Scores:</strong> [0.9980, 0.9981, 0.9980, 0.9981, 0.9981]</li>
        <li><strong>Mean F1:</strong> 0.9981 (±0.0001 std)</li>
        <li><strong>Stability:</strong> Standard deviation of 0.0001 confirms robust generalization</li>
      </ul>
      <p>This minimal variance proves the model's reliability across different data subsets and protects against overfitting.</p>
    </section>

    <div class="divider"></div>

    <section id="results">
      <h2>Results</h2>

      <div class="result-box">
        <h3>Test Set Performance (307,524 URLs)</h3>
        <ul>
          <li><strong>Accuracy:</strong> 99.81%</li>
          <li><strong>Precision:</strong> 99.60% (99.6% of flagged URLs are truly phishing)</li>
          <li><strong>Recall:</strong> 98.85% (caught 98.85% of all phishing URLs)</li>
          <li><strong>F1-Score:</strong> 99.22%</li>
          <li><strong>AUC-ROC:</strong> 99.84%</li>
          <li><strong>False Positive Rate:</strong> 0.06% (152 FP out of 269,146 legitimate URLs)</li>
        </ul>
      </div>

      <div class="viz-container">
        <img src="./images/conf.png" alt="Confusion Matrix" class="viz-image">
      </div>

      <h3>Real-World Test Cases</h3>
      <table>
        <thead>
          <tr>
            <th>URL</th>
            <th>Prediction</th>
            <th>Confidence</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>smbc-cardisi.club</td>
            <td>PHISHING</td>
            <td>99.97%</td>
          </tr>
          <tr>
            <td>portal-trezor-io-start.weebly.com</td>
            <td>PHISHING</td>
            <td>99.97%</td>
          </tr>
          <tr>
            <td>www.optus.com.au</td>
            <td>LEGITIMATE</td>
            <td>93.42%</td>
          </tr>
          <tr>
            <td>www.mbank.sk</td>
            <td>LEGITIMATE</td>
            <td>98.39%</td>
          </tr>
        </tbody>
      </table>
    </section>

    <div class="divider"></div>

    <section id="deployment">
      <h2>Production Deployment</h2>

      <h3>Whitelist Integration</h3>
      <p>Production API includes intelligent whitelist validation as the first line of defense:</p>
      <pre><code>def check_whitelist(url: str) -> tuple[bool, str]:
    extracted = tldextract.extract(url)
    registered_domain = f"{extracted.domain}.{extracted.suffix}"
    
    # Check if domain is in trusted whitelist
    if registered_domain not in trusted_domains:
        return False, "Domain not in whitelist"
    
    # Special handling for shared platforms
    if registered_domain in shared_platforms and subdomain:
        return False, f"Suspicious subdomain on shared platform"
    
    # Detect brand impersonation in subdomains
    if subdomain contains other TLD patterns:
        return False, f"Brand impersonation detected"
    
    # Check for sensitive keywords in subdomain
    if any(keyword in subdomain for keyword in sensitive_keywords):
        return False, f"Sensitive keyword found in subdomain"
    
    return True, f"Trusted domain"</code></pre>

      <p><strong>Whitelist Features:</strong></p>
      <ul>
        <li>Instant approval for trusted domains (banks, e-commerce, government)</li>
        <li>Special handling for shared platforms (GitHub Pages, Weebly, Carrd)</li>
        <li>Subdomain validation prevents abuse of trusted domains</li>
        <li>Reduces API latency for whitelisted domains</li>
      </ul>

      <h3>Inference Pipeline (&lt;50ms)</h3>
      <pre><code>def predict_url(url):
    # 1. Whitelist check (~5ms)
    is_safe, reason = check_whitelist(url)
    if is_safe:
        return {'prediction': 'LEGITIMATE', 'confidence': 1.0}
    
    # 2. Extract features (~15ms)
    features = extract_features(url)
    
    # 3. TF-IDF transform (~10ms)
    tfidf_features = vectorize(url)
    
    # 4. Combine & predict (~10ms)
    X = hstack([features, tfidf_features])
    prob = calibrated_model.predict_proba(X)[0, 1]
    
    return {
        'prediction': 'PHISHING' if prob >= 0.686 else 'LEGITIMATE',
        'confidence': abs(prob - 0.5) * 2
    }</code></pre>

      <h3>API Endpoint</h3>
      <pre><code>@app.post("/predict")
async def predict_urls(request: URLRequest):
    predictions = []
    
    for url in request.urls:
        # Whitelist bypass
        is_safe, reason = check_whitelist(url)
        if is_safe:
            predictions.append({
                'URL': url,
                'Prediction': 'LEGITIMATE',
                'Probability': 0.0,
                'Confidence': 1.0
            })
            continue
        
        # Full ML pipeline
        result = predict_url(url)
        predictions.append(result)
    
    return {'predictions': predictions}</code></pre>

      <h3>Browser Extension Integration</h3>
      <pre><code>// Chrome extension intercepts navigation
chrome.webNavigation.onBeforeNavigate.addListener(async (details) => {
  const result = await fetch('api.byefraud.com/predict', {
    method: 'POST',
    body: JSON.stringify({ urls: [details.url] })
  });
  
  if (result.predictions[0].Prediction === 'PHISHING') {
    chrome.tabs.update(details.tabId, {
      url: 'warning.html?blocked=' + details.url
    });
  }
});</code></pre>

      <h3>Model Artifacts</h3>
      <p>The production system saves a single comprehensive artifact file:</p>
      <pre><code>model_artifacts = {
    'model': calibrated_model,
    'base_model': best_lgb_model,
    'tfidf_char': tfidf_char,
    'tfidf_word': tfidf_word,
    'scaler': scaler,
    'features': fast_lexical_features,
    'threshold': optimal_threshold,
    'performance': {...}
}

joblib.dump(model_artifacts, 'lightgbm_advanced_model.pkl')</code></pre>

      <h3>Production Metrics</h3>
      <ul>
        <li><strong>Detection speed:</strong> &lt;50ms inference latency</li>
        <li><strong>False positive rate:</strong> 0.06% on test set</li>
        <li><strong>Real-time capability:</strong> Suitable for browser extension deployment</li>
      </ul>
    </section>

  </main>

  <script>
    const sections = document.querySelectorAll('section');
    
    const observerOptions = {
      root: null,
      rootMargin: '0px',
      threshold: 0.15
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, observerOptions);
    
    sections.forEach(section => {
      observer.observe(section);
    });

    const navLinks = document.querySelectorAll('.sidebar-nav a');
    
    window.addEventListener('scroll', () => {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (scrollY >= (sectionTop - 200)) {
          current = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    });

    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        window.scrollTo({
          top: targetSection.offsetTop - 40,
          behavior: 'smooth'
        });
      });
    });

    // Initialize logo visibility
    window.addEventListener('load', () => {
      const logoContainer = document.querySelector('.sidebar-logo-container');
      if (logoContainer) {
        logoContainer.classList.add('visible');
      }
    });
  </script>

</body>
</html>