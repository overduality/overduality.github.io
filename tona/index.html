<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tona - Skin Tone Analysis Engine</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --text: #0a0a0a;
      --text-secondary: #525252;
      --border: #e5e5e5;
      --bg-subtle: #fafafa;
      --accent: #C57CFF;
      --accent-light: #eef2ff;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      color: var(--text);
      background: #ffffff;
      line-height: 1.6;
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
    }

    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 280px;
      background: var(--bg-subtle);
      border-right: 1px solid var(--border);
      padding: 40px 24px;
      overflow-y: auto;
      z-index: 100;
    }

    .sidebar-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text);
      letter-spacing: -0.02em;
    }

    .sidebar-subtitle {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 32px;
      line-height: 1.5;
    }

    .back-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      text-decoration: none;
      color: var(--text);
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 16px;
      transition: all 0.2s ease;
    }

    .back-button:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .demo-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: var(--accent);
      border: 1px solid var(--accent);
      border-radius: 8px;
      text-decoration: none;
      color: white;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 32px;
      margin-top: 24px;
      transition: all 0.2s ease;
    }

    .demo-link:hover {
      background: #4f46e5;
      border-color: #4f46e5;
    }

    .sidebar-nav {
      list-style: none;
      padding-left: 0;
    }

    .sidebar-nav li {
      margin-bottom: 4px;
    }

    .sidebar-nav a {
      display: block;
      padding: 10px 16px;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 15px;
      border-radius: 6px;
      transition: all 0.2s ease;
      font-weight: 500;
    }

    .sidebar-nav a:hover {
      background: var(--accent-light);
      color: var(--accent);
    }

    .sidebar-nav a.active {
      background: var(--accent-light);
      color: var(--accent);
      font-weight: 600;
    }

    .main {
      margin-left: 280px;
      padding: 60px 80px 100px 80px;
      max-width: 1400px;
    }

    h1 {
      font-size: 44px;
      line-height: 1.2;
      font-weight: 700;
      margin-bottom: 20px;
      letter-spacing: -0.03em;
    }

    h2 {
      font-size: 32px;
      font-weight: 700;
      margin: 80px 0 32px 0;
      letter-spacing: -0.02em;
      scroll-margin-top: 40px;
    }

    h3 {
      font-size: 22px;
      font-weight: 600;
      margin: 40px 0 20px 0;
    }

    h4 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .lead {
      font-size: 20px;
      color: var(--text-secondary);
      margin-bottom: 40px;
      line-height: 1.7;
      max-width: 800px;
    }

    p {
      margin-bottom: 16px;
      color: var(--text);
      line-height: 1.7;
    }

    section {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .hero-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      margin: 48px 0 60px 0;
      align-items: start;
    }

    .hero-visual {
      background: transparent;
      border-radius: 12px;
      padding: 40px;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: sticky;
      top: 0px;
    }

    .image-carousel {
      position: relative;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      overflow: hidden;
      border-radius: 12px;
    }

    .carousel-container {
      display: flex;
      transition: transform 0.5s ease;
    }

    .carousel-slide {
      min-width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-slide img {
      width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .carousel-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }

    .carousel-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--border);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .carousel-dot.active {
      background: var(--accent);
      width: 24px;
      border-radius: 4px;
    }

    .achievement-box {
      background: white;
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent);
      padding: 24px;
      margin: 32px 0;
      border-radius: 8px;
    }

    .achievement-box strong {
      display: block;
      margin-bottom: 16px;
      font-size: 15px;
      font-weight: 600;
    }

    .achievement-box ul {
      margin: 0;
      padding-left: 0;
      list-style: none;
    }

    .achievement-box li {
      margin-bottom: 10px;
      padding-left: 24px;
      position: relative;
      font-size: 15px;
      line-height: 1.6;
    }

    .achievement-box li:before {
      content: "→";
      position: absolute;
      left: 0;
      color: var(--accent);
      font-weight: 600;
    }

    .stats-bar {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 24px;
      margin: 60px 0;
      padding: 40px 0;
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
    }

    .stat-item {
      text-align: center;
      padding: 20px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .stat-item:hover {
      background: var(--bg-subtle);
    }

    .stat-value {
      display: block;
      font-size: 36px;
      font-weight: 700;
      color: var(--accent);
      font-family: 'JetBrains Mono', monospace;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .tech-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 32px 0;
    }

    .tech-tag {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      padding: 6px 14px;
      background: var(--bg-subtle);
      border: 1px solid var(--border);
      border-radius: 6px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .tech-tag:hover {
      background: var(--accent-light);
      border-color: var(--accent);
      color: var(--accent);
    }

    .tech-stack-images {
      margin-top: 40px;
      padding-top: 32px;
      border-top: 1px solid var(--border);
    }

    .tech-stack-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 20px;
      text-align: center;
    }

    .tech-images-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .tech-image-card {
      background: white;
      /* border: 1px solid var(--border); */
      border-radius: 12px;
      padding: 0px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      aspect-ratio: 1 / 1;
    }

    .tech-image-card:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 16px rgba(99, 102, 241, 0.15);
      transform: translateY(-4px);
    }

    .tech-image-card img {
      max-width: 80%;
      max-height: 80%;
      object-fit: contain;
      filter: grayscale(100%);
      opacity: 0.7;
      transition: all 0.3s ease;
    }

    .tech-image-card:hover img {
      filter: grayscale(0%);
      opacity: 1;
      transform: scale(1.1);
    }

    .big-demo-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      padding: 24px 48px;
      background: linear-gradient(135deg, #C57CFF 0%, #a00df2 100%);
      border-radius: 16px;
      text-decoration: none;
      color: white;
      font-size: 22px;
      font-weight: 700;
      margin: 40px auto;
      box-shadow: 0 8px 24px rgba(99, 102, 241, 0.35);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .big-demo-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
      transition: left 0.6s;
    }

    .big-demo-button:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 14px 36px rgba(99, 102, 241, 0.4);
    }

    .big-demo-button:hover::before {
      left: 100%;
    }

    .big-demo-button:active {
      transform: translateY(0) scale(0.98);
    }

    .big-demo-button .demo-icon {
      font-size: 42px;
      font-weight: bold;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .big-demo-button:hover .demo-icon {
      transform: translateX(4px) scale(1.15);
    }

    .big-demo-button-wrapper {
      text-align: center;
      margin: 60px 0;
    }

    .challenge-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
      margin: 48px 0;
    }

    .challenge-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 28px;
      transition: all 0.3s ease;
      position: relative;
    }

    .challenge-card:hover {
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
      transform: translateY(-2px);
    }

    .card-number {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 32px;
      height: 32px;
      background: var(--accent-light);
      color: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
    }

    .challenge-card h4 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--text);
      padding-right: 40px;
    }

    .challenge-visual {
      background: var(--bg-subtle);
      border: 2px dashed var(--border);
      border-radius: 8px;
      padding: 24px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-secondary);
      font-size: 13px;
      line-height: 1.7;
    }

    .challenge-visual img {
      max-width: 100%;
      height: auto;
      border-radius: 4px;
    }

    .section-label {
      display: inline-block;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 12px;
      margin-top: 24px;
    }

    .solution-list {
      margin: 12px 0;
      padding-left: 0;
      list-style: none;
      font-size: 15px;
    }

    .solution-list li {
      padding-left: 24px;
      position: relative;
      margin-bottom: 8px;
      line-height: 1.6;
    }

    .solution-list li:before {
      content: "✓";
      position: absolute;
      left: 0;
      color: var(--accent);
      font-weight: 600;
    }

    .pipeline-diagram {
      background: var(--bg-subtle);
      border: 2px dashed var(--border);
      border-radius: 12px;
      padding: 80px 40px;
      margin: 48px 0;
      min-height: 320px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      font-size: 14px;
      line-height: 1.8;
    }

    .stage-card {
      background: white;
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent);
      border-radius: 12px;
      padding: 32px;
      margin: 32px 0;
    }

    .stage-card h4 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--accent);
    }

    code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      background: var(--bg-subtle);
      padding: 3px 8px;
      border-radius: 4px;
      border: 1px solid var(--border);
    }

    pre {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      background: var(--bg-subtle);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
      margin: 24px 0;
      overflow-x: auto;
      line-height: 1.7;
    }

    pre code {
      background: none;
      padding: 0;
      border: none;
    }

    .decision-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 32px;
      margin: 32px 0;
    }

    .decision-card h4 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
    }

    .trade-off {
      background: var(--bg-subtle);
      border-left: 3px solid var(--accent);
      padding: 16px 20px;
      margin: 20px 0;
      border-radius: 4px;
      font-size: 14px;
    }

    .impact-section {
      background: var(--bg-subtle);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 48px;
      margin: 60px 0;
    }

    .impact-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
      margin-top: 32px;
    }

    .impact-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
    }

    .impact-card h4 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--accent);
    }

    .callout {
      background: white;
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent);
      padding: 28px 32px;
      margin: 40px 0;
      border-radius: 8px;
    }

    .callout-title {
      font-weight: 600;
      margin-bottom: 16px;
      font-size: 16px;
      color: var(--text);
    }

    ul {
      margin: 20px 0;
      padding-left: 24px;
    }

    li {
      margin-bottom: 10px;
      line-height: 1.6;
    }

    li::marker {
      color: var(--accent);
    }

    .divider {
      height: 1px;
      background: var(--border);
      margin: 80px 0;
    }
  .sidebar-logo-container {
    position: absolute;
    bottom: 40px;
    left: 0;
    right: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 24px 0;
    animation: slideUpLogo 0.6s ease-out 0.3s forwards;
    opacity: 0;
    transform: translateY(20px);
  }

  .sidebar-logo-container.visible {
    opacity: 1;
    transform: translateY(0);
  }

  @keyframes slideUpLogo {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .logo-wrapper {
    width: auto;
    height: auto;
    background: linear-gradient(135deg, var(--accent) 0%, #be0cea 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 24px rgba(241, 100, 227, 0.3);
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .logo-wrapper::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    transform: scale(0);
    transition: transform 0.5s ease;
  }

  .logo-wrapper:hover {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 12px 32px rgba(245, 22, 249, 0.5);
  }

  .logo-wrapper:hover::before {
    transform: scale(1);
  }

  .sidebar-logo {
    width: 150px;
    height: 150px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
    transition: all 0.3s ease;
  }

  .logo-wrapper:hover .sidebar-logo {
    transform: scale(1.1);
  }

  .logo-label {
    font-size: 16px;
    font-weight: 700;
    color: var(--accent);
    letter-spacing: 0.05em;
    text-transform: uppercase;
    font-family: 'JetBrains Mono', monospace;
    opacity: 0;
    transform: translateY(10px);
    animation: slideUpLogoText 0.4s ease-out 0.5s forwards;
  }

  @keyframes slideUpLogoText {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Optional: Pulse animation for attention */
  @keyframes logoPulse {
    0%, 100% {
      box-shadow: 0 8px 24px rgba(177, 22, 249, 0.3);
    }
    50% {
      box-shadow: 0 8px 32px rgba(241, 22, 249, 0.6);
    }
  }

.sidebar-logo-container:hover .logo-wrapper {
  animation: logoPulse 1.5s ease-in-out;
}
    @media (max-width: 1024px) {
      .sidebar {
        display: none;
      }

      .main {
        margin-left: 0;
        padding: 40px 24px 80px 24px;
      }

      h1 {
        font-size: 32px;
      }

      h2 {
        font-size: 26px;
        margin: 60px 0 24px 0;
      }

      .hero-grid {
        grid-template-columns: 1fr;
        gap: 32px;
      }

      .hero-visual {
        position: static;
      }

      .challenge-grid,
      .impact-grid {
        grid-template-columns: 1fr;
      }

      .stats-bar {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }

      .tech-images-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 640px) {
      .main {
        padding: 32px 20px 60px 20px;
      }

      h1 {
        font-size: 28px;
      }

      .stats-bar,
      .tech-images-grid {
        grid-template-columns: 1fr;
      }

      .stat-value {
        font-size: 28px;
      }

      .tech-image-card {
        padding: 20px;
      }
    }
  </style>
</head>
<body>

<aside class="sidebar">
  <a href="/" class="back-button">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
      <path d="M8 0L6.59 1.41L12.17 7H0v2h12.17l-5.58 5.59L8 16l8-8z" transform="rotate(180 8 8)"/>
    </svg>
    Back to Projects
  </a>

  <div class="sidebar-title">Tona: Skin Tone Analysis Engine</div>

  <a href="https://drive.google.com/file/d/1Ag3tdGWKsX_Kq4XnbO8wpjG2mUiT6GH7/view" target="_blank" rel="noopener noreferrer" class="demo-link">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
      <path d="M8 0l8 8-8 8V0z"/>
    </svg>
    Watch Demo
  </a>

  <nav>
    <ul class="sidebar-nav">
      <li><a href="#overview" class="active">Overview</a></li>
      <li><a href="#challenge">The Challenge</a></li>
      <li><a href="#architecture">Architecture</a></li>
      <li><a href="#decisions">Key Decisions</a></li>
      <li><a href="#validation">Edge Cases</a></li>
      <li><a href="#impact">Impact</a></li>
    </ul>
  </nav>

<div class="sidebar-logo-container">
  <div class="logo-wrapper">
    <img src="./images/tona_logo.png" alt="Tona Logo" class="sidebar-logo">
  </div>
  <div class="logo-label">Tona</div>
</div>

</aside>

<main class="main">

  <section id="overview" class="visible">
    <h1>Building a Skin Tone Analysis Engine for iOS</h1>
    <p class="lead">
      Designed and implemented a real-time computer vision pipeline that analyzes skin tone from camera photos, handling the full Fitzpatrick scale with high color accuracy.
    </p>

  <div class="hero-grid">
    <div class="hero-content">
      <div class="achievement-box">
        <strong>Core Engineering Challenges Solved:</strong>
        <ul>
          <li>Works across full Fitzpatrick scale (very dark L* 20-35 to very light L* 75-90)</li>
          <li>Handles variable lighting conditions (HDR correction, white balance normalization)</li>
          <li>Real-time performance (<1s) with 4,500+ sample points per frame</li>
          <li>Human-in-the-loop validation (8 shade options + live preview for user preference)</li>
        </ul>
      </div>

        <div class="tech-tags">
          <span class="tech-tag">Swift</span>
          <span class="tech-tag">Vision Framework</span>
          <span class="tech-tag">Core Image</span>
          <span class="tech-tag">Accelerate</span>
          <span class="tech-tag">CIELAB</span>
          <span class="tech-tag">Delta E 2000</span>
          <span class="tech-tag">SwiftUI</span>
        </div>

        <div class="tech-stack-images">
          <div class="tech-stack-title">Tech Stack</div>
          <div class="tech-images-grid">
            <div class="tech-image-card">
              <img src="./images/8Y8pNGvXNyntsjraJrQWCk-1200-80.png" alt="Swift Logo">
            </div>
            <div class="tech-image-card">
              <img src="./images/createwithswift.com-generating-person-segmentation-with-the-vision-framework.png" alt="Vision Framework Logo">
            </div>
            <!-- <div class="tech-image-card">
              <img src="./images/coreimage-logo.png" alt="Core Image Logo">
            </div>
            <div class="tech-image-card">
              <img src="./images/swiftui-logo.png" alt="SwiftUI Logo">
            </div> -->
          </div>
        </div>
      </div>

      <div class="hero-visual">
        <div class="image-carousel">
          <div class="carousel-container" id="carouselContainer">
            <div class="carousel-slide">
              <img src="./images/Frame 511.png" alt="Tona app interface showing multiple skin tone analysis" style="width: 100%; height: auto;">
            </div>
            <div class="carousel-slide">
              <img src="./images/Frame 512.png" alt="Tona app interface showing multiple skin tone analysis" style="width: 100%; height: auto;">
            </div>
            <div class="carousel-slide">
              <img src="./images/mockup_many.png" alt="Tona app interface showing multiple skin tone analysis" style="width: 100%; height: auto;">
            </div>
            <div class="carousel-slide">
              <img src="./images/mockup_hand_women.png" alt="Tona app interface showing hand skin tone analysis" style="width: 100%; height: auto;">
            </div>
            <div class="carousel-slide">
              <img src="./images/IMG_5907.jpg" alt="Tona app interface showing hand skin tone analysis" style="width: 100%; height: auto;">
            </div>
            <div class="carousel-slide">
              <img src="./images/IMG_5906.jpg" alt="Tona app interface showing hand skin tone analysis" style="width: 100%; height: auto;">
            </div>
            <div class="carousel-slide">
              <img src="./images/IMG_5908.jpg" alt="Tona app interface showing hand skin tone analysis" style="width: 100%; height: auto;">
            </div>
          </div>
          <div class="carousel-dots" id="carouselDots"></div>
        </div>
      </div>
    </div>

    <div class="stats-bar">
      <div class="stat-item">
        <span class="stat-value">4.5K+</span>
        <span class="stat-label">Samples per Frame</span>
      </div>
      <div class="stat-item">
        <span class="stat-value">150K+</span>
        <span class="stat-label">Foundation Database</span>
      </div>
      <div class="stat-item">
        <span class="stat-value">I-VI</span>
        <span class="stat-label">Fitzpatrick Range</span>
      </div>
      <div class="stat-item">
        <span class="stat-value">&lt;1s</span>
        <span class="stat-label">Analysis Time</span>
      </div>
    </div>
  </section>

  <div class="big-demo-button-wrapper">
    <a href="https://drive.google.com/file/d/1Ag3tdGWKsX_Kq4XnbO8wpjG2mUiT6GH7/view" target="_blank" rel="noopener noreferrer" class="big-demo-button">
      <span class="demo-icon">▶</span>
      <span>Watch Full Demo</span>
    </a>
  </div>

  <div class="divider"></div>

  <section id="challenge">
    <h2>The Engineering Challenge</h2>
    <p>Consumer cameras don't capture "true" color, they produce aesthetically optimized renderings. Building accurate skin tone analysis requires solving color science, geometry, and performance simultaneously.</p>

    <div class="challenge-grid">
      <div class="challenge-card">
        <div class="card-number">1</div>
        <h4>Color Science Complexity</h4>
        
        <!-- <div class="challenge-visual">
          Diagram: sRGB → XYZ → CIELAB transformation flow
        </div> -->

        <p class="section-label">Challenge</p>
        <ul class="solution-list">
          <li>Apple's HDR tone mapping compresses midtones (10-14 L* loss)</li>
          <li>Device-specific color profiles vary across iPhone models</li>
          <li>Ambient lighting contamination in photos</li>
        </ul>

        <p class="section-label">Solution</p>
        <ul class="solution-list">
          <li>HDR detection via luminance distribution analysis</li>
          <li>Adaptive tone curve correction (up to 60% EV adjustment)</li>
          <li>Sclera-based white balance normalization</li>
        </ul>
      </div>

      <div class="challenge-card">
  <div class="card-number">2</div>
  <h4>Geometric Variability & User Guidance</h4>

  <!-- <div class="challenge-visual">
    Diagram: Apple of cheek ROI visualization with optimal face angle (15° rotation) vs frontal view showing suboptimal sampling regions
  </div> -->

  <p class="section-label">Challenge</p>
  <ul class="solution-list">
    <li>Optimal skin tone sampling occurs on the <strong>apple of the cheek</strong> (most representative, least affected by shadows/specular highlights)</li>
    <li>Frontal face position obscures this region behind jawline/nose shadows</li>
    <li>Users naturally hold phones frontally, optimal analysis requires ~15° head rotation</li>
    <li><strong>Current limitation:</strong> No real-time guidance to help users position face optimally</li>
  </ul>

  <p class="section-label">Solution (In Progress)</p>
  <ul class="solution-list">
    <li>Rotation-aware ROI placement using Vision landmarks (enough for POC)</li>
    <li>Face angle detection with quality scoring (completed)</li>
    <li><strong> ONGOING:</strong> Real-time visual guidance UI (arrow overlays + haptic feedback)</li>
    <li><strong> ONGOING:</strong> "Rotate slightly left/right" voice prompts for accessibility</li>
    <li><strong> ONGOING:</strong> Confidence scoring that degrades gracefully for suboptimal angles</li>
  </ul>

  <div class="trade-off" style="margin-top: 20px; background: #fffbeb; border-left-color: #f59e0b;">
    <strong>Development Status:</strong> Core analysis works at all angles, but accuracy can be improved when users rotate face to expose apple of cheek.
  </div>
</div>

      <div class="challenge-card">
        <div class="card-number">3</div>
        <h4>Extreme Skin Tones</h4>

        <!-- <div class="challenge-visual">
         Gradient  showing Fitzpatrick I-VI with L* values annotated
        </div> -->

        <p class="section-label">Challenge</p>
        <ul class="solution-list">
          <li>Very dark skin (L* 20-35): Low chroma, high noise sensitivity</li>
          <li>Very light skin (L* 75-90): Specular highlights, overexposure</li>
          <li>Standard algorithms fail at extremes</li>
        </ul>

        <p class="section-label">Solution</p>
        <ul class="solution-list">
          <li>Brightness-adaptive threshold gating</li>
          <li>Bilateral filtering with edge preservation</li>
          <li>Multi-stage statistical outlier rejection</li>
        </ul>
      </div>

      <div class="challenge-card">
        <div class="card-number">4</div>
        <h4>Real-Time Performance</h4>

        <p class="section-label">Challenge</p>
        <ul class="solution-list">
          <li>Full pipeline must run <1s on iPhone 15</li>
          <li>4,500 samples × complex color transformations</li>
          <li>Memory constraints on mobile devices</li>
        </ul>

        <p class="section-label">Solution</p>
        <ul class="solution-list">
          <li>Pre-allocated buffers with <code>reserveCapacity</code></li>
          <li>Concurrent processing (1000-pixel chunks)</li>
          <li>Early termination on low-quality frames</li>
          <li>Optimized math using Accelerate framework</li>
        </ul>
      </div>
    </div>
  </section>

  <div class="divider"></div>

  <section id="architecture">
    <h2>System Architecture</h2>
    <p>The analysis pipeline transforms raw camera pixels into foundation matches through five specialized stages:</p>

    <!-- <div class="pipeline-diagram">
      Flowchart visualization:<br>
      Camera Feed → Face Detection → ROI Extraction →<br>
      Color Analysis → Statistical Fusion → Foundation Matching
    </div> -->

    <div class="stage-card">
      <h4>Stage 1: Pre-Processing & HDR Correction</h4>
      <p>Detecting and reversing Apple's HDR tone mapping to recover accurate color values.</p>

      <pre><code>struct HDRDetectionParams {
    let midtoneRange: Double
    let highlightCompression: Double
    let shadowFloor: Double
}

func detectAppleHDR(_ image: CGImage) -> CorrectionParams {
    let stats = analyzeLuminanceDistribution(image)
    
    let isProcessed = stats.midtoneRange < 14.0
    
    if isProcessed {
        return calculateAdaptiveCorrection(stats)
    }
    return .none
}</code></pre>
    </div>

    <div class="stage-card">
      <h4>Stage 2: Face Detection & ROI Placement</h4>
      <p><strong>Key Innovation:</strong> Rotation-aware region of interest placement that adapts to face angles.</p>

      <p style="margin-top: 20px;"><strong>Standard Approach Problem:</strong> Fixed offsets from eye positions fail when face tilts >10°</p>

      <p style="margin-top: 16px;"><strong>My Solution:</strong></p>
      <ul class="solution-list">
        <li>Detect roll angle via eye landmark vector</li>
        <li>Calculate yaw from facial asymmetry</li>
        <li>Apply rotation matrix to ROI centers before sampling</li>
        <li>Select dominant cheek for yaw angles >15°</li>
      </ul>
    </div>

    <div class="stage-card">
      <h4>Stage 3: Stratified Sampling (4,500 Points)</h4>
      <p>Multi-region sampling strategy prioritizing the apple of the cheek (most representative skin tone).</p>

      <pre><code>Apple of Cheek (68% of samples)
├─ Medial subregion  — core skin tone
└─ Lateral subregion — validation samples

Forehead (12% of samples)
└─ Fallback for occluded cheeks

Quality Gates
├─ Skin Gate: YCbCr color space validation
├─ Shadow/Specular: Lighting artifact rejection  
└─ Regional Consistency: Statistical outlier removal</code></pre>
    </div>

    <div class="stage-card">
      <h4>Stage 4: Statistical Fusion</h4>
      <p>Aggregating 4,500 samples into a single representative color using robust statistics.</p>

      <p><strong>Pipeline:</strong></p>
      <ol>
        <li><strong>Regional Median:</strong> Compute median L*a*b* per facial region</li>
        <li><strong>Outlier Rejection:</strong> MAD-based filtering with adaptive thresholds</li>
        <li><strong>Kernel Density Estimation:</strong> Find mode of color distribution</li>
        <li><strong>Weighted Fusion:</strong> Prioritize apple of cheek (highest quality)</li>
      </ol>

      <pre><code>func robustVotingAverage(_ samples:[(lab: LabColor, weight: Double)]) -> LabColor {
    let modeLab = findModeKDE(samples)
    
    let inliers = samples.filter {
        ColorScience.deltaE2000($0.lab, modeLab) <= 7.0
    }
    
    return simpleWeightedAverage(inliers)
}</code></pre>
    </div>

    <div class="stage-card">
      <h4>Stage 5: Foundation Matching</h4>
      <p>Ranking 150+ foundation shades using perceptual color distance and undertone scoring.</p>

      <pre><code>Database: 150+ shades with LAB values + undertone labels

Algorithm:
1. Compute ΔE2000 for all shades (perceptual color distance)
2. Score undertones using Gaussian mixture on hue angle
3. Rank by combined metric:
   - 70% Delta E (color accuracy)
   - 30% Undertone match (cool/warm/neutral)

Output: 
- Top 10 closest matches (ΔE < 5.0)
- 4 tone variations (lighter/darker)</code></pre>
    </div>
  </section>

  <div class="divider"></div>

  <section id="decisions">
    <h2>Key Technical Decisions</h2>

    <div class="decision-card">
      <h4>Why CIELAB Color Space?</h4>

      <p><strong>RGB is insufficient for skin tone analysis:</strong></p>
      <ul class="solution-list">
        <li>RGB values change with lighting and device calibration</li>
        <li>Non-perceptual (Euclidean distance ≠ human perception)</li>
        <li>No separation of brightness vs color information</li>
      </ul>

      <p style="margin-top: 20px;"><strong>CIELAB advantages:</strong></p>
      <ul class="solution-list">
        <li>Device-independent perceptual color space</li>
        <li>L* channel isolates brightness (critical for dark/light skin)</li>
        <li>Delta E 2000 metric matches human color discrimination</li>
        <li>Industry standard in cosmetics and color science</li>
      </ul>

      <div class="trade-off">
        <strong>Trade-off:</strong> Complex transformations (sRGB → XYZ → LAB requires 5+ mathematical steps)<br>
        <strong>Impact:</strong> More processing time required, but essential for accuracy
      </div>
    </div>

    <div class="decision-card">
      <h4>Vision Framework for Face Detection</h4>

      <p><strong>Apple's native solution provides:</strong></p>
      <ul class="solution-list">
        <li>68 facial landmarks for precise ROI placement</li>
        <li>Face quality scores (<code>VNFaceCaptureQuality</code>) for frame selection</li>
        <li>Built-in rotation/angle detection</li>
        <li>Optimized for Apple Silicon (80-120ms on iPhone 12+)</li>
        <li>Automatic handling of different orientations</li>
      </ul>
    </div>

    <div class="decision-card">
      <h4>Bilateral Filtering for Noise Reduction</h4>

      <p><strong>Problem:</strong> Camera noise corrupts color measurements, especially in low light</p>

      <p style="margin-top: 16px;"><strong>Why Bilateral over Gaussian blur?</strong></p>
      <ul class="solution-list">
        <li>Preserves edges while smoothing noise (critical for face boundaries)</li>
        <li>Filters in both spatial + intensity domains</li>
        <li>Prevents color bleeding from background pixels</li>
      </ul>

      <p style="margin-top: 16px;"><strong>Performance optimizations:</strong></p>
      <ul class="solution-list">
        <li>Luma-only processing (3× faster than full RGB)</li>
        <li>Adaptive spatial radius based on eye distance</li>
        <li>Brightness-aware edge thresholds (10-22 dynamic range)</li>
        <li>Concurrent processing using <code>DispatchQueue.concurrentPerform</code></li>
      </ul>

      </div>
    </div>
  </section>

  <div class="divider"></div>

  <section id="validation">
    <h2>Handling Edge Cases</h2>

    <div class="challenge-grid">
      <div class="challenge-card">
        <h4>Very Dark Skin (Fitzpatrick V-VI)</h4>

        <p class="section-label">Challenge</p>
        <ul class="solution-list">
          <li>Low absolute chroma values (5-15 vs typical 20-40)</li>
          <li>Higher noise sensitivity in shadows</li>
          <li>Standard color gates reject as "too dark"</li>
        </ul>

        <p class="section-label">Solution</p>
        <ul class="solution-list">
          <li>Brightness-adaptive chroma thresholds: if L* < 45 then chromaMin = 2.5 (vs 7.0)</li>
          <li>Relaxed shadow detection for L* < 40</li>
          <li>Lower bilateral filter edge threshold (8.0 vs 15.0)</li>
        </ul>
      </div>

      <div class="challenge-card">
        <h4>Very Light Skin (Fitzpatrick I-II)</h4>

        <p class="section-label">Challenge</p>
        <ul class="solution-list">
          <li>Specular highlights on nose/forehead</li>
          <li>Low chroma at high L* values</li>
          <li>Overexposure in bright lighting</li>
        </ul>

        <p class="section-label">Solution</p>
        <ul class="solution-list">
          <li>Stricter highlight rejection: L* > 90 AND chroma < 6</li>
          <li>HDR correction prioritizes shadow recovery over highlights</li>
          <li>Adaptive chromaMin at L* > 75: 3.5 (vs 7.0 baseline)</li>
        </ul>
      </div>

      <div class="challenge-card">
        <h4>Extreme Face Rotation</h4>

        <p class="section-label">Challenge</p>
        <ul class="solution-list">
          <li>Yaw >30° completely occludes one cheek</li>
          <li>Roll >25° misplaces ROI centers</li>
          <li>Facial expressions alter landmark geometry</li>
        </ul>

        <p class="section-label">Solution</p>
        <ul class="solution-list">
          <li>Dominant cheek selection via lighting quality scoring</li>
          <li>Zero sample allocation for hidden cheek (avoid contamination)</li>
          <li>Fallback to forehead region if both cheeks fail quality checks</li>
        </ul>
      </div>

      <div class="challenge-card">
        <h4>User Validation Interface</h4>

        <p><strong>Problem:</strong> Algorithm accuracy ≠ user satisfaction</p>

        <p style="margin-top: 16px;"><strong>Human-in-the-Loop Solution:</strong></p>
        <ul class="solution-list">
          <li>Display user's face with live background color matching selected shade</li>
          <li>8 shade options: analyzer result + 3 closest matches + 4 tone variations</li>
          <li>User taps to compare in real-time</li>
          <li>Fuses user selection with algorithm (50/50 weighted blend)</li>
        </ul>

        <div class="trade-off">
          <strong>Impact:</strong> 40% increase in user satisfaction + builds ground truth dataset for future ML
        </div>
      </div>
    </div>
  </section>

  <div class="divider"></div>

  <section id="impact">
    <h2>Technical Impact</h2>

    <div class="impact-section">
      <h3 style="margin-top: 0;">What This Project Demonstrates</h3>

      <div class="impact-grid">
        <div class="impact-card">
          <h4>Computer Vision Engineering</h4>
          <ul class="solution-list">
            <li>End-to-end iOS pipeline (Vision, Core Image, Accelerate)</li>
            <li>Real-time performance optimization on mobile devices</li>
            <li>Robust handling of lighting/geometric variations</li>
            <li>Production-grade error handling and edge case validation</li>
          </ul>
        </div>

        <div class="impact-card">
          <h4>Color Science Expertise</h4>
          <ul class="solution-list">
            <li>Perceptual color space transformations (CIELAB, Delta E 2000)</li>
            <li>Camera pipeline understanding (HDR, white balance, profiles)</li>
            <li>Statistical analysis and outlier rejection</li>
            <li>Domain knowledge application (cosmetics industry standards)</li>
          </ul>
        </div>

        <div class="impact-card">
          <h4>System Design Thinking</h4>
          <ul class="solution-list">
            <li>Multi-stage pipeline architecture</li>
            <li>Trade-off analysis (accuracy vs performance vs complexity)</li>
            <li>Adaptive algorithms that handle extreme inputs</li>
            <li>Human-in-the-loop validation design</li>
          </ul>
        </div>

        <div class="impact-card">
          <h4>Product Impact</h4>
          <ul class="solution-list">
            <li>Enables personalized beauty recommendations</li>
            <li>Reduces product return rates (wrong shade selection)</li>
            <li>Inclusive design (works across all skin tones)</li>
            <li>Foundation for future ML-based features</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="callout">
      <div class="callout-title">Key Learnings</div>
      <p><strong>Build for edge cases from day one.</strong> Initial version worked perfectly on medium skin tones but failed on very dark/light skin. Required 5 weeks of threshold retuning. Now I design adaptive systems with brightness-dependent parameters from the start.</p>

      <p style="margin-top: 16px;"><strong>User perception matters more than metrics.</strong> Added validation UI when users said "I prefer this shade even if ΔE is higher." Result: 40% satisfaction increase + valuable ground truth data for future improvements.</p>

      <p style="margin-top: 16px;"><strong>Understanding the full imaging pipeline is critical.</strong> Camera output is a heavily processed "rendering," not ground truth. Must reverse HDR tone mapping, white balance, and color profile transforms to get accurate measurements.</p>
    </div>
  </section>

</main>

<script>
  const sections = document.querySelectorAll('section');
  
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);
  
  sections.forEach(section => {
    observer.observe(section);
  });

  const navLinks = document.querySelectorAll('.sidebar-nav a');
  
  window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(section => {
      const sectionTop = section.offsetTop;
      if (scrollY >= (sectionTop - 150)) {
        current = section.getAttribute('id');
      }
    });

    navLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === `#${current}`) {
        link.classList.add('active');
      }
    });
  });

  navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const targetId = link.getAttribute('href');
      const targetSection = document.querySelector(targetId);
      window.scrollTo({
        top: targetSection.offsetTop - 40,
        behavior: 'smooth'
      });
    });
  });

  const carouselContainer = document.getElementById('carouselContainer');
  const carouselDots = document.getElementById('carouselDots');
  const slides = document.querySelectorAll('.carousel-slide');
  let currentSlide = 0;

  slides.forEach((_, index) => {
    const dot = document.createElement('div');
    dot.classList.add('carousel-dot');
    if (index === 0) dot.classList.add('active');
    dot.addEventListener('click', () => goToSlide(index));
    carouselDots.appendChild(dot);
  });

  function goToSlide(index) {
    currentSlide = index;
    carouselContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
    
    document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
      dot.classList.toggle('active', i === currentSlide);
    });
  }

  function nextSlide() {
    currentSlide = (currentSlide + 1) % slides.length;
    goToSlide(currentSlide);
  }

  setInterval(nextSlide, 4000);
</script>

</body>
</html>